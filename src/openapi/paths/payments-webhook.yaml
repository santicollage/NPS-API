post:
  summary: Payment webhook
  description: Endpoint to receive payment confirmation from Wompi (updates payments.status and orders.status).
  tags:
    - Payments
  requestBody:
    required: true
    content:
      application/json:
        schema:
          $ref: '../schemas/payment.yaml#/WebhookPayload'
        example:
          event: 'transaction.updated'
          data:
            transaction:
              id: 'txn_123456789'
              status: 'APPROVED'
              amount_in_cents: 9000000
              currency: 'COP'
              reference: 'order_123'
  responses:
    '200':
      description: Webhook processed
      content:
        application/json:
          schema:
            $ref: '../schemas/payment.yaml#/WebhookResponse'
    '400':
      description: Invalid webhook data
      content:
        application/json:
          schema:
            $ref: '../schemas/user.yaml#/ErrorResponse'
