Cart:
  type: object
  properties:
    cart_id:
      type: integer
      example: 1
    user_id:
      type: integer
      nullable: true
      example: 1
    guest_id:
      type: string
      nullable: true
      description: Guest identifier for guest carts
      example: '550e8400-e29b-41d4-a716-446655440000'
    status:
      type: string
      enum: ['active', 'ordered', 'abandoned']
      example: 'active'
    created_at:
      type: string
      format: date-time
      example: '2023-10-01T12:00:00Z'
    updated_at:
      type: string
      format: date-time
      example: '2023-10-01T12:30:00Z'
    items:
      type: array
      items:
        $ref: '#/CartItem'
  required:
    - cart_id
    - status
    - created_at
    - updated_at

CartItem:
  type: object
  properties:
    cart_item_id:
      type: integer
      example: 1
    cart_id:
      type: integer
      example: 1
    product_id:
      type: integer
      example: 1
    quantity:
      type: integer
      example: 2
    reserved_until:
      type: string
      format: date-time
      nullable: true
      example: '2023-10-01T13:00:00Z'
    created_at:
      type: string
      format: date-time
      example: '2023-10-01T12:00:00Z'
    product:
      $ref: './product.yaml#/Product'
  required:
    - cart_item_id
    - cart_id
    - product_id
    - quantity
    - created_at

CartItemCreate:
  type: object
  properties:
    product_id:
      type: integer
      example: 1
    quantity:
      type: integer
      minimum: 1
      example: 2
  required:
    - product_id
    - quantity

CartItemUpdate:
  type: object
  properties:
    quantity:
      type: integer
      minimum: 1
      example: 3
  required:
    - quantity
