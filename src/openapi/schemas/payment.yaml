Payment:
  type: object
  properties:
    payment_id:
      type: integer
      example: 1
    order_id:
      type: integer
      nullable: true
      example: 1
    guest_id:
      type: string
      nullable: true
      description: Guest identifier for guest payments
      example: '550e8400-e29b-41d4-a716-446655440000'
    payu_transaction_id:
      type: string
      example: 'txn_123456789'
    amount:
      type: number
      format: float
      example: 90000.00
    currency:
      type: string
      example: 'COP'
    status:
      type: string
      enum: ['pending', 'approved', 'declined', 'error']
      example: 'pending'
    method:
      type: string
      example: 'credit_card'
    created_at:
      type: string
      format: date-time
      example: '2023-10-01T12:00:00Z'
  required:
    - payment_id
    - amount
    - currency
    - status
    - created_at

PaymentCreateRequest:
  type: object
  properties:
    order_id:
      type: integer
      description: Order ID to create payment for
      example: 1
    guest_id:
      type: string
      description: |
        Guest identifier for guest orders. Required when creating payment for a guest order.
        Must match the guest_id of the order to validate access.
      example: '550e8400-e29b-41d4-a716-446655440000'
  required:
    - order_id

PaymentCreateResponse:
  type: object
  properties:
    payment_id:
      type: integer
      example: 1
    payu_checkout_url:
      type: string
      format: uri
      example: 'https://checkout.payulatam.com/payment/123456'
    status:
      type: string
      example: 'pending'
    reference_code:
      type: string
      description: Payment reference code for tracking
      example: 'order_1_1234567890'
  required:
    - payment_id
    - payu_checkout_url
    - status

WebhookPayload:
  type: object
  description: PayU webhook payload structure
  properties:
    state_pol:
      type: string
      description: Payment state (4=APPROVED, 5=EXPIRED, 6=DECLINED, 7=PENDING)
      example: '4'
    transaction_id:
      type: string
      example: 'txn_123456789'
    reference_pol:
      type: string
      example: 'REF123456'
    reference_sale:
      type: string
      description: Order reference code
      example: 'order_1_1234567890'
    value:
      type: number
      example: 90000.00
    currency:
      type: string
      example: 'COP'
  required:
    - state_pol
    - transaction_id

WebhookResponse:
  type: object
  properties:
    message:
      type: string
      example: 'Webhook processed successfully'
  required:
    - message
